# Multi-RBL Lookup Server - Environment Configuration
# Copy this file to .env and customize the values

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================

# PostgreSQL connection settings
DB_HOST=localhost
DB_PORT=5432
DB_NAME=multirbl
DB_USER=multirbl
DB_PASSWORD=changeme

# Connection pool settings
DB_POOL_MAX=20
DB_IDLE_TIMEOUT=30000
DB_CONNECT_TIMEOUT=2000

# =============================================================================
# MEMCACHE CONFIGURATION (Optional - Performance Layer)
# =============================================================================

# Enable memcache for faster cache lookups (L1 cache layer)
# Two-tier caching: Memcache (L1 ~0.1ms) -> PostgreSQL (L2 ~1-5ms)
MEMCACHE_ENABLED=false

# Memcache server(s) - comma-separated list (host:port)
# Examples:
#   Single server: localhost:11211
#   Multiple servers: cache1.example.com:11211,cache2.example.com:11211
MEMCACHE_SERVERS=localhost:11211

# Enable debug logging for memcache operations
MEMCACHE_DEBUG=false

# =============================================================================
# WEB SERVER CONFIGURATION
# =============================================================================

# HTTP server port
PORT=3000

# Rate limiting for lookup endpoints
RATE_LIMIT_MAX=15
RATE_LIMIT_WINDOW_HOURS=1

# HTML header/footer injection
HEADER_HTML_FILE=./public_html/header.html
FOOTER_HTML_FILE=./public_html/footer.html

# =============================================================================
# CUSTOM RBL CONFIGURATION
# =============================================================================

# Custom RBL zone name (configured in database)
# This is informational only - actual config is in database
CUSTOM_RBL_ZONE=myrbl.example.com

# =============================================================================
# DNS SERVER CONFIGURATION
# =============================================================================

# DNS server settings (for src/start-dns-server.js)
DNS_SERVER_PORT=8053
DNS_SERVER_HOST=0.0.0.0
DNS_UPSTREAM=8.8.8.8
DNS_MULTI_RBL_DOMAIN=multi-rbl.example.com

# Multi-RBL lookup timeout in milliseconds (default: 250)
# How long to wait for RBL responses before returning results
DNS_MULTI_RBL_TIMEOUT=250

# DNS server logging level (default: info)
# Options: none, error, info, verbose
#   none    - No logging
#   error   - Only errors
#   info    - Startup, errors, and summary results
#   verbose - All queries and detailed results
DNS_LOG_LEVEL=info

# =============================================================================
# LOGGING
# =============================================================================

# Log file location
LOG_FILE=./logs/requests.log
LOG_LEVEL=info
